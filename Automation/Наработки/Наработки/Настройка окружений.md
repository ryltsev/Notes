1. Отдельно создаём класс Parser

```
class Parser:
    config = configparser.ConfigParser()
    file_local = os.path.join(os.path.dirname(__file__), "local.ini")
    config.read(file_local)
    file_db = os.path.join(os.path.dirname(__file__), "db.ini")
    config.read(file_db)

    file_black = os.path.join(os.path.dirname(__file__), "TestData", "black.sh")

```

1. Добавляем опции в конфиг (Почитать подробнее)

```
def pytest_addoption(parser):
    parser.addoption(
        "--url",
        action="store",
        default=Parser.config.get("URL", "host"),
        help="Base url",
    )

    parser.addoption(

        "--dbname_psp", action="store", default=Parser.config.get("DB_PSP", "database")

    ),

    parser.addoption(

        "--user_psp", action="store", default=Parser.config.get("DB_PSP", "user")),

    parser.addoption(
        "--password_psp",
        action="store",
        default=Parser.config.get("DB_PSP", "password"),
    ),
    parser.addoption(

        "--host_psp", action="store", default=Parser.config.get("DB_PSP", "host")),

    parser.addoption(

        "--port_psp", action="store", default=Parser.config.get("DB_PSP", "port")),

```

1. Делаем фикстуры которые гетнут инфу из конфига (почитать что тут делает request)

```
@pytest.fixture(scope="module")
def url(request):
    return request.config.getoption("--url")
@pytest.fixture(scope="session")
def dbname_psp(request):
    return request.config.getoption("--dbname_psp")
@pytest.fixture(scope="session")
def user_psp(request):
    return request.config.getoption("--user_psp")
@pytest.fixture(scope="session")
def password_psp(request):
    return request.config.getoption("--password_psp")
@pytest.fixture(scope="session")
def host_psp(request):
    return request.config.getoption("--host_psp")
@pytest.fixture(scope="session")
def port_psp(request):
    return request.config.getoption("--port_psp")
```

1. Создаём файлики с соответствующими кредами

db.ini

```
[DB_ISZ]
HOST = rc1a-ui7md5j28pemqtfq.mdb.yandexcloud.net
PORT = 6432
DATABASE = qa3_isz
USER = isz
PASSWORD = 4nzYRTqdNimE

[DB_PSP]
HOST = rc1a-bkwv672v0rt9tocn.mdb.yandexcloud.net
PORT = 6432
DATABASE = qa3psp
USER = psp
PASSWORD = cS562UGsGtikQvCK
```

local.ini

```
[URL]
localhost = https://api-release-isz.interneturok.ru
host = https://api-qa3-psp.interneturok.ru
host_isz = https://api-qa3-isz.interneturok.ru
release = https://api-release-isz.interneturok.ru
host_old_hs = https://api-qa3-ege.interneturok.ru

host_isz_dev01 = https://api-dev1-isz.interneturok.ru
host_isz_dev02 = https://api-dev2-isz.interneturok.ru
host_isz_qa1 = https://api-qa1-isz.interneturok.ru
host_isz_qa2 = https://api-qa2-isz.interneturok.ru

[ACCOUNT]
email = a.ryltcev@interneturok.ru
password = Jsdh78&h2Q87
```