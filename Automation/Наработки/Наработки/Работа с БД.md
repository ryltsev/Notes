Инсерт в БД

Файлик sql с инсертом - application.sql

```
insert into applications (user_id, step, school_id) values
(2325, 8, 38);
```

1. Подключение к БД

```
@pytest.fixture()
def connection_db_psp(dbname_psp, user_psp, password_psp, port_psp, host_psp):
    connection = psycopg2.connect(
        dbname=dbname_psp,
        user=user_psp,
        password=password_psp,
        port=port_psp,
        host=host_psp,
    )
    cursor_db = connection.cursor()
    yield cursor_db
    connection.commit()
    cursor_db.close()
    connection.close()
    print("Closed DB")
```

1. Инсерт в БД

```
@pytest.fixture()
def insert_applications(connection_db_isz):
    try:

        with open(os.path.join(FilesPath.isz, "applications.sql").strip(), "r") as script:

            connection_db_isz.execute(script.read())
    except psycopg2.ProgrammingError as e:
        print(e)
    print("Success insert applications")
```

Очистка БД
Файлик sql с очисткой БД - delete_isz.sql

```
TRUNCATE TABLE application_reference_requests RESTART IDENTITY;

TRUNCATE TABLE applications, data_for_sending_documents, expulsion_orders RESTART IDENTITY;

TRUNCATE TABLE school_classes RESTART IDENTITY;
TRUNCATE TABLE schools RESTART IDENTITY;
```

Очистка БД

```
@pytest.fixture()
def delete_db_psp(connection_db_psp):
    try:

        with open(os.path.join(FilesPath.psp, "delete_psp.sql").strip(), "r") as script:

            connection_db_psp.execute(script.read())
    except psycopg2.ProgrammingError as e:
        print(e)
    print("Success delete Psp")
```